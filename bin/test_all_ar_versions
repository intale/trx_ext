#!/usr/bin/env ruby

# frozen_string_literal: true

require_relative '../lib/trx_ext/version'

TrxExt::SUPPORTED_AR_VERSIONS.each do |ar_version|
  `rm Gemfile.lock`
  Process.waitpid(Kernel.spawn({ 'AR_VERSION' => ar_version }, "bundle install --quiet", close_others: true))
  Process.waitpid(Kernel.spawn({ 'AR_VERSION' => ar_version }, "rspec", close_others: true))
end
